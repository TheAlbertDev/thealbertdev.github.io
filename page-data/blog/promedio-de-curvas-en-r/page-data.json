{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/blog/promedio-de-curvas-en-r/",
    "result": {"data":{"site":{"siteMetadata":{"title":"TheAlbert.Dev"}},"markdownRemark":{"id":"2a766ee4-6a5c-559a-9f1a-e306e28736d9","excerpt":"No es la primera vez que he necesitado hacerlo, pero no es algo que necesite hacer muy habitualmente. Hablo de hacer el promedio de curvas o sets de datos. En‚Ä¶","html":"<p>No es la primera vez que he necesitado hacerlo, pero no es algo que necesite hacer muy habitualmente. Hablo de hacer el promedio de curvas o sets de datos. En alg√∫n centro de investigaci√≥n en el que he estado dispon√≠an de Origin Pro, que tiene una funci√≥n muy √∫til que te hace este trabajo con dos clics y medio; pero en la universidad no disponemos de este <em>software</em> y hago todo el procesado de datos con R. Cada vez que tengo que hacer este tipo de procesado con R‚Ä¶ Ay, mi querido R‚Ä¶ üòÖ</p>\n<p>En esta entrada, vamos a ver c√≥mo hacer con R ese promedio de sets de datos y c√≥mo extraer otras estad√≠sticas como su desviaci√≥n est√°ndar.</p>\n<h2>Para qu√© queremos un promedio de curvas</h2>\n<p>Pues vamos a imaginarnos el siguiente supuesto. Tenemos un sensor que queremos caracterizar. Para ello, cogemos, no solo este sensor, sino muchos, y realizamos m√∫ltiples mediciones mientras vamos variando de manera controlada la magnitud que miden. Por ejemplo, vamos a caracterizar un <a href=\"https://es.wikipedia.org/wiki/RTD\">sensor de temperatura RTD</a>, una resistencia cuyo valor var√≠a en funci√≥n de la temperatura. Un ejemplo de circuito para medir esa variaci√≥n de resistencia es un <a href=\"https://es.wikipedia.org/wiki/Puente_de_Wheatstone\">puente de Wheatstone</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8b0d6f783e05e0fbad7cb8a0ae519ce1/cb425/puente-wheatstone.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.16455696202532%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGUlEQVQoz3WT2YqEQAxF/f/f80XRJ0VbxH3fM5xAidNWB0LHLDfJ7ZRzXZec5/nSdV1l33dBqqqSvu/VJkbNL3W2bZNpmmRZllsBS5JEbeKAjeOo9jzPdyMrIMUY3zIMg+R5/vKTi7+uayuoTti2rWRZdgPziy8Mw3tVEzuOQwF937dO6rAKCVEU/QtCQ1mWuqrhDmEjfPAK+AsQTtDnSggTw2Ecx+ory0LSNJWu624qrBxSVBSFFj8BmQKemMJcAisaOpjQxr1yaBsdMM/zXo3ITT+puK6rwGzH1HBNQ/2XDeBT8LN20zQvQHw0I855BUGg3zRwzG0BgE0C3eALPwDmNlF85P0S5/lSsOHGvBLAbK/I1Bh6nvYfnaJbhIylzoAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Puente de Wheatstone\"\n        title=\"Puente de Wheatstone\"\n        src=\"/static/8b0d6f783e05e0fbad7cb8a0ae519ce1/f058b/puente-wheatstone.png\"\n        srcset=\"/static/8b0d6f783e05e0fbad7cb8a0ae519ce1/c26ae/puente-wheatstone.png 158w,\n/static/8b0d6f783e05e0fbad7cb8a0ae519ce1/6bdcf/puente-wheatstone.png 315w,\n/static/8b0d6f783e05e0fbad7cb8a0ae519ce1/f058b/puente-wheatstone.png 630w,\n/static/8b0d6f783e05e0fbad7cb8a0ae519ce1/40601/puente-wheatstone.png 945w,\n/static/8b0d6f783e05e0fbad7cb8a0ae519ce1/78612/puente-wheatstone.png 1260w,\n/static/8b0d6f783e05e0fbad7cb8a0ae519ce1/cb425/puente-wheatstone.png 1678w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Circuito de simulaci√≥n de un puente the Wheatstone con RTD.</p>\n<p>Para este ejemplo, he simulado en SPICE una serie de mediciones para una PT100, un sensor muy com√∫n y cuyas caracter√≠sticas puedes encontrar <a href=\"https://es.wikipedia.org/wiki/RTD\">al final de esta p√°gina</a>. En estas mediciones, he hecho un barrido en temperatura de -100 a 100 ¬∫C. Adem√°s, en cada medici√≥n, he variado ligeramente la resistencia nominal a 0 ¬∫C del PT100 y su coeficiente de temperatura (una simulaci√≥n montecarlo, para los m√°s interesados). Por lo tanto, veremos que, para un mismo rango de temperatura, obtenemos una se√±al de salida diferente en cada medici√≥n. Nuestro objetivo es, de estas mediciones, sacar la media y la desviaci√≥n est√°ndar para poder estimar una funci√≥n de transferencia promedio y su error del sensor.</p>\n<p>Huelga decirlo, en un caso real los datos los obtendr√≠amos experimentalmente y no mediante una simulaci√≥n.</p>\n<h2>Sets de datos</h2>\n<p>Antes de ponernos con R, aqu√≠ tienes los datos que hemos obtenido <del>de la simulaci√≥n</del> experimentalmente en la caracterizaci√≥n de nuestro sensor. C√≥mo ver√°s, tenemos una respuesta que var√≠a seg√∫n el sensor que utilicemos.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c7a8efacbaabeb0891a35fbfc05e1dcc/0a47e/funcion-de-transferencia.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABdElEQVQ4y42TW6uCUBCF+/+/JnwQokToIUklCPSlKxloZje7X6x1WBNbtKKTMJh77/lm7TVTBQAOhwOSJPkp5vO5xHK5xGq1QhRF6Ha7sG1bvisEXi6Xt8TFYvERuF6vJYIggOu6MAwDpmmi0+lgs9k8gefz+V9FrM7o9/sC0XUdrVYLg8EAcRzLHgtVHo8HttutKFJRVMiDrDwejwWkaZooC8MwV6vOikIunE6nN1U8xD2C6vU6Go0GPM/LE+mhUs/IgdPptOQhQcrsdruNarUKx3EEwARV8JM9Atzv9zmQSbPZTJTUajU0m025WpqmX0ElID1kApUNh0NpP73yfV+urK72yePXtbzL1+sVo9FIzLYsS34TVvTnlygBOVdUR0/p4WuTfpnTHHi73dDr9TCZTATGuSqC1L+Cb4LUevHNkDkk8H6/yyxSKYMFdrudNItDTxC7zjfXsywDm8k9nmXw+3g8Ppvy7WEyr8LqLMqZ/fb8ARn+zNAxJ7YSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Curvas de la funci√≥n de transferencia\"\n        title=\"Curvas de la funci√≥n de transferencia\"\n        src=\"/static/c7a8efacbaabeb0891a35fbfc05e1dcc/0a47e/funcion-de-transferencia.png\"\n        srcset=\"/static/c7a8efacbaabeb0891a35fbfc05e1dcc/c26ae/funcion-de-transferencia.png 158w,\n/static/c7a8efacbaabeb0891a35fbfc05e1dcc/6bdcf/funcion-de-transferencia.png 315w,\n/static/c7a8efacbaabeb0891a35fbfc05e1dcc/0a47e/funcion-de-transferencia.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Promedio de curvas en R</h2>\n<p>Ahora s√≠, vamos en materia. Para empezar, veamos c√≥mo tenemos organizado nuestro <em>data frame</em>. Este consiste en tres columnas: <em>Voltage</em>, <em>Temperature</em> y <em>Group</em>. Las dos primeras son claras; hacen referencia a las tensiones y temperaturas medidas. La tercera columna indica el sensor o curva. As√≠ pues, todas las filas con el mismo grupo corresponden a una curva espec√≠fica. En este caso tenemos 6 grupos o curvas. Este <em>data frame</em> lo tenemos almacenado en la variable <code class=\"language-text\">df</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 394px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/051c8a4ddd20cf6b441495a05e05a28a/cc097/data-frames-experimentales.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98.73417721518987%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVQ4y5WUy2vqQBTG/Y+LjyqIIkg3iqKgC0HcuJDuum7tIhsV39pY37Utja8anwgi6pzLN5JcjTeBOzAkM5n85vvOOTOmSCTCPB4Pu7u7YxaLhTkcDhYKhRjmw+Ews9lsarfb7cxqtbL7+3sWDAZZNBrl6zHG90AgwEyPj48UiUTI5XKRzWYjs9lMiUSCkskkpVIp8vl85PV6ye1208PDg/oei8UI//r9fj7vdDopHo+T6XQ6MVmWWalUYs1mkxWLRZZOp/kTjYhuuiiKTBAEttvtruYlSWImIqL1ek3v7++8FwoFyufz1O/38YnAvOxo0+mUarWaOla+zedz4sDNZkONRoPa7TbV63Uql8s0GAx0gcvlkkRRpOPxeLVGluUzcLFY0NvbG1+Uy+U4/OvrSxc4Go0ok8nQ6XS6WjOZTM7A1WpFrVaLW4Y6PD8/Pw0VwrJW4e/v719gs9mk7+9v6nQ6HIjd9ICIOdYdDoerNbPZ7AzEjlAI20gKrMO2HhBKKpXKjWU1hkhKr9fjoGKxyGEfHx+6QMQcLi4to6kKlQVQJwgCZbNZwxhifbVavYkhykm1jHKBDdhW4qkHhDU40QLVLCPIsIg6hFLYNyobCMCmWiDmORAVDmXIHMqmVCpxuBEQjv4ZQ2Ww3W756QAMsTQ6erBsGMP9fs8HUAil2B3v/2tZzTIsA4JyQYahstvtGtah9iwrlwauL54QZBjxAxBgJOcSqDTlfTgccmc3tw2AkiRxAMCAwS4yrQUqTygbj8dXR0+pTw6E3ZeXF3p9faXn52d6enriavWAiBVuJS3w5+eH/gA92rrlEnUS3QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dataframes experimentales\"\n        title=\"Dataframes experimentales\"\n        src=\"/static/051c8a4ddd20cf6b441495a05e05a28a/cc097/data-frames-experimentales.png\"\n        srcset=\"/static/051c8a4ddd20cf6b441495a05e05a28a/c26ae/data-frames-experimentales.png 158w,\n/static/051c8a4ddd20cf6b441495a05e05a28a/6bdcf/data-frames-experimentales.png 315w,\n/static/051c8a4ddd20cf6b441495a05e05a28a/cc097/data-frames-experimentales.png 394w\"\n        sizes=\"(max-width: 394px) 100vw, 394px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><em>Data frame</em> con los datos experimentales. Solo se muestran las primeras filas u observaciones.</p>\n<h3>Homogeneizaci√≥n de la variable independiente</h3>\n<p>Lo primero que haremos es algo que justamente ahora no necesitamos porque trabajamos con datos simulados, pero que suele ser com√∫n cuando operamos con datos experimentales. Esto es ‚Äúhomogeneizar‚Äù la variable independiente (en este caso, la temperatura). ¬øQu√© quiero decir con esto? En un caso real ser√≠a dif√≠cil realizar medidas siempre en las mismas temperaturas. En una medida har√≠amos una medici√≥n en 1.7 ¬∫C, 22.5 ¬∫C y 45.9 ¬∫C, y en otra a 1.5 ¬∫C, 25.0 ¬∫C y 44.1 ¬∫C. Pero para hacer la media, necesitamos que haya una medici√≥n (voltaje) en cada curva para cada temperatura. Por ello, lo que necesitar√≠amos hacer es obtener un valor de voltaje para las temperaturas 1.5 ¬∫C, 1.7 ¬∫C, 22.5 ¬∫C, 25.0 ¬∫C, 44.1 ¬∫C y 45.9 ¬∫C para cada uno de los sensores y curvas y, entonces, hacer la media para cada temperatura.</p>\n<p>Despu√©s, lo que haremos para obtener una medida que no tenemos de un sensor en una temperatura dada es obtenerla mediante interpolaci√≥n de las dos temperaturas m√°s cercanas.</p>\n<p>Vamos a ir paso a paso y vamos a empezar generando un vector con todas las temperaturas utilizadas en todas las mediciones/curvas.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">library<span class=\"token punctuation\">(</span>ggplot2<span class=\"token punctuation\">)</span>\nlibrary<span class=\"token punctuation\">(</span>dplyr<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Sensores/curvas. Tenemos 6.</span>\nsensors <span class=\"token operator\">&lt;-</span> seq<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Obtenemos todas las temperaturas que se han utilizado durante las mediciones.</span>\napproxTemperature <span class=\"token operator\">&lt;-</span> unique<span class=\"token punctuation\">(</span>df<span class=\"token operator\">$</span>Temperature<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Aproximaci√≥n de la variable dependiente</h3>\n<p>Ahora toca que, mediante interpolaci√≥n, rellenemos esos espacios en blanco entre mediciones para que exista una medida (voltaje) para cada curva/sensor y temperatura.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Creamos una copia del DataFrame original, pero en blanco.</span>\n<span class=\"token comment\"># Aqui guardaremos las aproximaciones/interpolaciones.</span>\napproxDf <span class=\"token operator\">&lt;-</span> df<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># Recorremos todas las curvas y \"rellenamos\" los datos blanco entre temperaturas.</span>\n<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>n <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">:</span>length<span class=\"token punctuation\">(</span>sensors<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token comment\"># Realizamos la interpolacion para el sensor/curva n.</span>\n    approxData <span class=\"token operator\">&lt;-</span> data.frame<span class=\"token punctuation\">(</span>\n      with<span class=\"token punctuation\">(</span>subset<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">,</span> Group<span class=\"token operator\">==</span>sensors<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n           approx<span class=\"token punctuation\">(</span>\n\t\t\t\t\t\t\t\tx<span class=\"token operator\">=</span>Temperature<span class=\"token punctuation\">,</span>\n\t\t\t\t\t\t\t\ty<span class=\"token operator\">=</span>Voltage<span class=\"token punctuation\">,</span>\n\t\t\t\t\t\t\t\txout <span class=\"token operator\">=</span> approxTemperature<span class=\"token punctuation\">,</span>\n\t\t\t\t\t\t\t\tmethod <span class=\"token operator\">=</span> <span class=\"token string\">\"linear\"</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      method <span class=\"token operator\">=</span> <span class=\"token string\">\"approx()\"</span>\n    <span class=\"token punctuation\">)</span>\n\n\t\t<span class=\"token comment\"># Eliminamos una columna method que nos devuelve la funcion y que no queremos.</span>\n    approxData<span class=\"token operator\">$</span>method <span class=\"token operator\">&lt;-</span> <span class=\"token keyword\">NULL</span>\n\t\t<span class=\"token comment\"># Cambiamos los nombres por defecto de las columnas.</span>\n    names<span class=\"token punctuation\">(</span>approxData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>names<span class=\"token punctuation\">(</span>approxData<span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token string\">\"x\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;-</span> <span class=\"token string\">\"Temperature\"</span>\n    names<span class=\"token punctuation\">(</span>approxData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>names<span class=\"token punctuation\">(</span>approxData<span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token string\">\"y\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;-</span> <span class=\"token string\">\"Voltage\"</span>\n\n\t\t<span class=\"token comment\"># A√±adimos el numero de curva/sensor.</span>\n    approxData<span class=\"token operator\">$</span>Group <span class=\"token operator\">=</span> sensors<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span>\n\n\t\t<span class=\"token comment\"># Incorporamos la aproximacion al nuevo DataFrame.</span>\n    approxDf <span class=\"token operator\">&lt;-</span> rbind<span class=\"token punctuation\">(</span>approxDf<span class=\"token punctuation\">,</span> approxData<span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Promedio y desviaci√≥n est√°ndar</h3>\n<p>Finalmente, solo queda ir temperatura a temperatura y calcular el promedio y desviaci√≥n est√°ndar de todas las curvas/sensores.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Ahora si, calculamos el promedio y desviacion estandar punto a punto.</span>\napproxDf <span class=\"token operator\">&lt;-</span> approxDf <span class=\"token percent-operator operator\">%>%</span>\n  group_by<span class=\"token punctuation\">(</span>Temperature<span class=\"token punctuation\">)</span> <span class=\"token percent-operator operator\">%>%</span>\n  summarise<span class=\"token punctuation\">(</span>avgVoltage <span class=\"token operator\">=</span> mean<span class=\"token punctuation\">(</span>Voltage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> sdVoltage <span class=\"token operator\">=</span> sd<span class=\"token punctuation\">(</span>Voltage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token percent-operator operator\">%>%</span>\n  arrange<span class=\"token punctuation\">(</span>Temperature<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Dibujando los resultados</h3>\n<p>Si dibujamos los resultados con el siguiente c√≥digo, nos queda algo tal que as√≠.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Finalmente, dibujamos los resultado.</span>\ntransferFunction <span class=\"token operator\">&lt;-</span>\n  ggplot<span class=\"token punctuation\">(</span>data <span class=\"token operator\">=</span> approxDf<span class=\"token punctuation\">,</span> mapping <span class=\"token operator\">=</span> aes<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span>Temperature<span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>avgVoltage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n  labs<span class=\"token punctuation\">(</span>\n    x <span class=\"token operator\">=</span> <span class=\"token string\">\"Temperatura (¬∫C)\"</span><span class=\"token punctuation\">,</span>\n    y <span class=\"token operator\">=</span> <span class=\"token string\">\"Voltaje (V)\"</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n  geom_ribbon<span class=\"token punctuation\">(</span>aes<span class=\"token punctuation\">(</span>ymin <span class=\"token operator\">=</span> avgVoltage <span class=\"token operator\">-</span> sdVoltage<span class=\"token punctuation\">,</span> ymax <span class=\"token operator\">=</span> avgVoltage <span class=\"token operator\">+</span> sdVoltage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> alpha<span class=\"token operator\">=</span><span class=\"token number\">.2</span><span class=\"token punctuation\">,</span> fill<span class=\"token operator\">=</span><span class=\"token string\">\"skyblue1\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n  geom_line<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nshow<span class=\"token punctuation\">(</span>transferFunction<span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/258b51e44e4e28dc8f9197f9b0565530/0a47e/funcion-de-transferencia-promedio.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXUlEQVQ4y42TCXOCMBCF/f8/r6cF0YZgArk8R6FYX2eXYxDUKTOPwLI8dr8lMwCoqgrGmBtZax/eF8bAOcvKC4OFWOMzkQhhgxkZlmXJL5CcczfrOO69Y6m8QLTK8L5IEQsFlRtst9up4T1RVd45Ns1UjnmSYr6UEJmGaT/irG0Mr9crdrsdJ3caVxS8h9IFomWKeCX5OgTP8WEnbEgnYjiuqDPTeWMUrVIonTfVuC7vthM2lFJODLv2GtgCmdKTasaMe8Pj8TgwNFyBVAXe4hSJWLcY2oqecLZjhp4r8IiExmucQheWOQ2ZjhmPY/2Uq7Jkg5c4w0eSwVrHbXcs/6vesP6psBAKX98NK04YMLpn/JBh9x/mhe05DndGM22PEEKLxU2edztos2l3ym/LkYzrumYdDgceFsXISGvNK8UvlwtomMN8uj+dTs1Qnh30MrVCX9/v9zifz0/z/wD/dda+Gd+DBQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Funci√≥n de transferencia promedio\"\n        title=\"Funci√≥n de transferencia promedio\"\n        src=\"/static/258b51e44e4e28dc8f9197f9b0565530/0a47e/funcion-de-transferencia-promedio.png\"\n        srcset=\"/static/258b51e44e4e28dc8f9197f9b0565530/c26ae/funcion-de-transferencia-promedio.png 158w,\n/static/258b51e44e4e28dc8f9197f9b0565530/6bdcf/funcion-de-transferencia-promedio.png 315w,\n/static/258b51e44e4e28dc8f9197f9b0565530/0a47e/funcion-de-transferencia-promedio.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>La l√≠nea negra corresponde a la funci√≥n de transferencia promedio de nuestro sensor y el √°rea en azul a su desviaci√≥n est√°ndar. Se espera que al realizar una medida con uno de estos sensores, se obtenga un resultado dentro del √°rea azul con una probabilidad del 68.26% (1œÉ). Si quisi√©ramos utilizar un intervalo de mayor confianza (probabilidad del 95%), deber√≠amos de dibujar 1.96œÉ.</p>\n<p>Para poder ver una peque√±a comparaci√≥n entre el antes y el despu√©s, podemos dibujar encima las curvas de cada medici√≥n.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c888438aeec7e4a71773190b40c1b00a/0a47e/funcion-de-transferencia-promedio-superpuesta.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABe0lEQVQ4y41TiW6DMAzt///atq5TYdBSylEgEAi9T9q+yeYQ9Fwky7KTPD8/Jz0A2G63SNP03yalRJZlyFXGseMFMCYu5vM5egR4PB7vLtGFTq6KlSIghTiRGNku+toYA8PGxPGxWCxKwMPh8JZRDRRGApo5wbc2gmE5CCKBLCsLMeD1esVqtWJGtbUZ0sF5niMSMYaGhR99BNv1eY/ySimkaXmWAanv/X5/x4g8MRJxDM2wMNBMOJ7PhagI+fpcbQw4m83uNFTMLoM5cdAfmrAdj5nkzCaFfKRxDbjZbDqABOb6Ib60MfSRXemnOsyfWaPhcrnkNhIpoVsePoZj+EHEGrU1vdX4NtdMmRgGIsHn7xQDc4okSbi9d4weMiTA4nSE5YbQLb+qmDaTe9bqUw1LhgeEIkaSyA5A7Xkg1RNpT7ftyZqfcrlcWEdq/VQUKIoC6/WaY3r0BCSEYE/58/kMGibtFdV5ine7XTmUV4suUytUnT4AvdlX6w+9TNSi8dqTTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Funci√≥n de transferencia promedio superpuesta\"\n        title=\"Funci√≥n de transferencia promedio superpuesta\"\n        src=\"/static/c888438aeec7e4a71773190b40c1b00a/0a47e/funcion-de-transferencia-promedio-superpuesta.png\"\n        srcset=\"/static/c888438aeec7e4a71773190b40c1b00a/c26ae/funcion-de-transferencia-promedio-superpuesta.png 158w,\n/static/c888438aeec7e4a71773190b40c1b00a/6bdcf/funcion-de-transferencia-promedio-superpuesta.png 315w,\n/static/c888438aeec7e4a71773190b40c1b00a/0a47e/funcion-de-transferencia-promedio-superpuesta.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Conclusiones</h2>\n<p>Hay otros <em>softwares</em> que esto te lo hacen autom√°ticamente o en un par de clics, pero cuando no dispones de estos <em>softwares</em> (como es mi caso), toca hacerlo a mano. En esta entrada hemos visto c√≥mo hacer el promedio de diferentes curvas de caracterizaci√≥n de un sensor, pero es extrapolable a curvas de diferente tipo. De este procesado, aparte de la media, tambi√©n hemos calculado la desviaci√≥n est√°ndar. Finalmente, hemos acabado dibujando la curva promedio y el √°rea/intervalo de confianza con un 68.26% de probabilidad o 1œÉ.</p>\n<p>Lo importante: aqu√≠ tenemos una chuleta de la que echar mano cuando tengamos que promediar curvas ü§£ ¬°Nos vemos en la siguiente entrada!</p>","frontmatter":{"title":"Promedio de curvas en R","date":"febrero 05, 2021","description":"Tutorial para realizar el promedio de diferentes cruvas o series de datos en R."}},"previous":null,"next":null},"pageContext":{"id":"2a766ee4-6a5c-559a-9f1a-e306e28736d9","previousPostId":null,"nextPostId":null}},
    "staticQueryHashes": ["1775578501","2841359383"]}